{
  "builders" : [{
    "type"             : "virtualbox-ovf",
    "source_path"      : "tmp/box.ovf",
    "vm_name"          : "coreos",
    "ssh_username"     : "core",
    "ssh_key_path"     : "tmp/insecure_private_key",
    "ssh_wait_timeout" : "10s",
    "shutdown_command" : "sudo -S shutdown -P now"
  }],

  "provisioners" : [{
    "type"        : "file",
    "source"      : "files/",
    "destination" : "/tmp"
  }, {
    "type"   : "shell",
    "inline" : [
      "sudo cp /tmp/docker-tcp.socket /etc/systemd/system/",
      "sudo systemctl enable docker-tcp.socket",
      "sudo systemctl enable docker.service",
      "sudo sh -c 'echo 42000000000000000000000000000042 > /etc/machine-id'"
    ]
  }],

  "post-processors" : [{
    "type"                 : "vagrant",
    "include"              : ["files/override-plugin.rb"],
    "vagrantfile_template" : "vagrantfile.tpl",
    "output"               : "coreos.box"
  }]
}
